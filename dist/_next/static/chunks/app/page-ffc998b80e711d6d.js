(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2480:function(){},8819:function(e,n,t){Promise.resolve().then(t.bind(t,6774))},6774:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return g}});var r=t(7437),i=t(2265);t(2113);var s=t(888),o=t.n(s),c=t(8110),u=t(5033);let a=(0,u.mc)("IMG","gt"),l=(0,u.mc)("DATA","gt");function d(e){let{cb:n}=e,t=(0,i.useRef)(null);return(0,i.useEffect)(()=>{t.current&&t.current.addEventListener("submit",function(e){e.preventDefault();let t=new FormData(this),r={};t.forEach((e,n)=>{r[n]=e}),n&&n(r)})},[]),(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:(0,r.jsx)("div",{className:" rounded bg-white p-4",children:(0,r.jsxs)("form",{id:"conf_form",ref:t,children:[(0,r.jsxs)("div",{className:"pb-4 flex justify-between",children:[(0,r.jsx)("div",{className:"w-20 leading-8",children:"Group:"}),(0,r.jsx)("input",{className:"w-60 h-8 rounded indent-2 focus:outline-none focus:ring focus:ring-2-indigo-500  focus:border-indigo-500 border-2 border-indigo-300  ",name:"group"})]}),(0,r.jsxs)("div",{className:"pb-4 flex justify-between",children:[(0,r.jsx)("div",{className:"w-20 leading-8",children:"Duration:"}),(0,r.jsx)("input",{className:"w-60 h-8 rounded indent-2 border-2 border-indigo-300  focus:outline-none focus:ring focus:ring-2-indigo-500 focus:border-indigo-500",type:"number",name:"duration"})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("button",{className:"border-solid border-2 border-indigo-600 pl-4 pr-4 rounded",children:"保存"})})]})})})}function f(e){let{cb:n}=e,t=(0,i.useRef)(null),[s,o]=(0,i.useState)("");return(0,i.useEffect)(()=>{t.current&&t.current.addEventListener("submit",function(e){e.preventDefault();let t=new FormData(this),r={};if(t.forEach((e,n)=>{r[n]=e}),!(null==r?void 0:r.password)){o("密码不能为空");return}"9eb3489a8d9e592694038d09830713cd"===(0,c.MD5)(r.password).toString()?n&&n():o("密码输入错误！Tip：'dwp toor spv'")})},[]),(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:(0,r.jsx)("div",{className:" rounded bg-white p-4",children:(0,r.jsxs)("form",{id:"login_form",ref:t,children:[(0,r.jsxs)("div",{className:"pb-4 flex justify-between",children:[(0,r.jsx)("div",{className:"w-20 leading-8",children:"Password:"}),(0,r.jsx)("input",{className:"w-60 h-8 rounded indent-2 focus:outline-none focus:ring focus:ring-2-indigo-500  focus:border-indigo-500 border-2 border-indigo-300  ",type:"password",name:"password"})]}),!!s&&(0,r.jsx)("div",{className:"text-sm text-rose-500 pb-4",children:s}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("button",{className:"border-solid border-2 border-indigo-600 pl-4 pr-4 rounded",children:"Login"})})]})})})}function m(e){let{isLogin:n=!1}=e,[t,s]=(0,i.useState)([]),[c,m]=(0,i.useState)(0),[g,h]=(0,i.useState)(!1),[b,x]=(0,i.useState)(n),p=(0,i.useRef)(null),j=async()=>{let e=localStorage.getItem("viewerConf"),n=e&&JSON.parse(e);(null==n?void 0:n.group)&&(l=(0,u.mc)("DATA",n.group),a=(0,u.mc)("IMG",n.group));try{let e=await fetch(l);if(200===e.status){let n=await e.json();s((0,u.Sy)(n))}}catch(e){console.log(e)}},w=()=>{if(p.current){var e;null===(e=p.current)||void 0===e||e.destroy()}let n=localStorage.getItem("viewerConf"),t=n&&JSON.parse(n);p.current=new(o())(document.getElementById("images"),{interval:(null==t?void 0:t.duration)?Number(t.duration):5e3})};return(0,i.useEffect)(()=>{b&&j()},[]),(0,i.useEffect)(()=>{t.length&&setTimeout(()=>{w()},10)},[t]),(0,r.jsxs)(r.Fragment,{children:[b&&(0,r.jsxs)("div",{className:"container min-w-fit  min-h-screen",children:[(0,r.jsxs)("ul",{className:"flex flex-wrap",id:"images",children:[t&&t.length>0&&t.map((e,n)=>(0,r.jsx)("li",{className:"w-48 h-48 mt-2 ml-2 ",children:(0,r.jsx)("img",{src:"".concat(a).concat(e.imgSrc),className:"w-full h-full object-cover rounded"})},"img_".concat(n+9))),(0,r.jsx)("li",{onClick:()=>{if(3===c){m(0),h(!0);return}m(e=>++e)},className:"w-48 h-48 ml-2 mt-2"})]}),g&&(0,r.jsx)(d,{cb:e=>{e&&(localStorage.setItem("viewerConf",JSON.stringify(e)),window.location.href="/?")}})]}),!b&&(0,r.jsx)(f,{cb:()=>{(0,u.d8)("isLogin","1",1),x(!0),j()}})]})}function g(){let[e,n]=(0,i.useState)(!1),[t,s]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{s((0,u.Km)()),n(!0)},[]),(0,r.jsx)(r.Fragment,{children:e&&(0,r.jsx)(m,{isLogin:t})})}},5033:function(e,n,t){"use strict";function r(e,n){return"IMG"===e?"https://raw.githubusercontent.com/fhvknb/raw-assets/master/".concat(n,"/"):"https://raw.githubusercontent.com/fhvknb/raw-assets/master/json/".concat(n,".json")}function i(e,n,t){let r="";if(t){let e=new Date;e.setTime(e.getTime()+864e5*t),r="; expires="+e.toUTCString()}document.cookie=e+"="+(n||"")+r+"; path=/"}function s(){return document.cookie.includes("isLogin=1")}function o(e){if(!e||!e.length)return[];for(let n=e.length-1;n>0;n--){let t=Math.floor(Math.random()*(n+1));[e[n],e[t]]=[e[t],e[n]]}return e}function c(e){if("number"!=typeof e)throw Error("数据错误");return Math.floor(Math.PI/180*e*100)/100}t.d(n,{Km:function(){return s},M4:function(){return c},Sy:function(){return o},d8:function(){return i},mc:function(){return r}})}},function(e){e.O(0,[992,322,971,23,744],function(){return e(e.s=8819)}),_N_E=e.O()}]);