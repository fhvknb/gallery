(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2480:function(){},8819:function(e,n,t){Promise.resolve().then(t.bind(t,4515))},4515:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return h}});var s=t(7437),i=t(2265);t(2113);var r=t(888),o=t.n(r),c=t(8110);function a(e,n){return"IMG"===e?"https://raw.githubusercontent.com/fhvknb/raw-assets/master/".concat(n,"/"):"https://raw.githubusercontent.com/fhvknb/raw-assets/master/json/".concat(n,".json")}let l="",d=a("IMG","gt"),u=a("DATA","gt");function f(e){let{cb:n}=e,t=(0,i.useRef)(null);return(0,i.useEffect)(()=>{t.current&&t.current.addEventListener("submit",function(e){e.preventDefault();let t=new FormData(this),s={};t.forEach((e,n)=>{s[n]=e}),n&&n(s)})},[]),(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:(0,s.jsx)("div",{className:" rounded bg-white p-4",children:(0,s.jsxs)("form",{id:"conf_form",ref:t,children:[(0,s.jsxs)("div",{className:"pb-4 flex justify-between",children:[(0,s.jsx)("div",{className:"w-20 leading-8",children:"Group:"}),(0,s.jsx)("input",{className:"w-60 h-8 rounded indent-2 focus:outline-none focus:ring focus:ring-2-indigo-500  focus:border-indigo-500 border-2 border-indigo-300  ",name:"group"})]}),(0,s.jsxs)("div",{className:"pb-4 flex justify-between",children:[(0,s.jsx)("div",{className:"w-20 leading-8",children:"Duration:"}),(0,s.jsx)("input",{className:"w-60 h-8 rounded indent-2 focus:outline-none focus:ring focus:ring-2-indigo-500 focus:border-indigo-500 border-2 border-indigo-300  ",type:"number",name:"duration"})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{className:"border-solid border-2 border-indigo-600 pl-4 pr-4 rounded",children:"保存"})})]})})})}function m(e){let{cb:n}=e,t=(0,i.useRef)(null);return(0,i.useEffect)(()=>{t.current&&t.current.addEventListener("submit",function(e){e.preventDefault();let t=new FormData(this),s={};t.forEach((e,n)=>{s[n]=e}),n&&n(s)})},[]),(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:(0,s.jsx)("div",{className:" rounded bg-white p-4",children:(0,s.jsxs)("form",{id:"login_form",ref:t,children:[(0,s.jsxs)("div",{className:"pb-4 flex justify-between",children:[(0,s.jsx)("div",{className:"w-20 leading-8",children:"Password:"}),(0,s.jsx)("input",{className:"w-60 h-8 rounded indent-2 focus:outline-none focus:ring focus:ring-2-indigo-500  focus:border-indigo-500 border-2 border-indigo-300  ",type:"password",name:"password"})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{className:"border-solid border-2 border-indigo-600 pl-4 pr-4 rounded",children:"Login"})})]})})})}function g(e){let{isLogin:n=!1}=e,[t,r]=(0,i.useState)([]),[g,h]=(0,i.useState)(0),[b,x]=(0,i.useState)(!1),[j,p]=(0,i.useState)(n),w=(0,i.useRef)(null),v=async()=>{let e=localStorage.getItem("viewerConf"),n=e&&JSON.parse(e);(null==n?void 0:n.group)&&(u=a("DATA",n.group),d=a("IMG",n.group));try{let e=await fetch(u);if(200===e.status){let n=await e.json();r(n)}}catch(e){console.log(e)}},N=()=>{if(w.current){var e;null===(e=w.current)||void 0===e||e.destroy()}let n=localStorage.getItem("viewerConf"),t=n&&JSON.parse(n);w.current=new(o())(document.getElementById("images"),{interval:(null==t?void 0:t.duration)?Number(t.duration):5e3})};return(0,i.useEffect)(()=>{v(),l="9eb3489a8d9e592694038d09830713cd"},[]),(0,i.useEffect)(()=>{t.length&&N()},[t]),(0,s.jsxs)("div",{className:"container min-w-fit  min-h-screen",children:[(0,s.jsxs)("ul",{className:"flex flex-wrap",id:"images",children:[j&&t&&t.length>0&&t.map((e,n)=>(0,s.jsx)("li",{className:"w-48 h-48 mt-2 ml-2 ",children:(0,s.jsx)("img",{src:"".concat(d).concat(e.imgSrc),className:"w-full h-full object-cover rounded"})},"img_".concat(n+9))),(0,s.jsx)("li",{onClick:()=>{if(3===g){h(0),x(!0);return}h(e=>++e)},className:"w-48 h-48 ml-2 mt-2"})]}),b&&(0,s.jsx)(f,{cb:e=>{e&&(localStorage.setItem("viewerConf",JSON.stringify(e)),window.location.href="/?")}}),!j&&(0,s.jsx)(m,{cb:e=>{(function(e,n,t){let s="";{let e=new Date;e.setTime(e.getTime()+864e5),s="; expires="+e.toUTCString()}document.cookie=e+"=1"+s+"; path=/"})("isLogin",0,0),e&&e.password&&(0,c.MD5)(e.password).toString()===l&&(p(!0),N())}})]})}function h(){let[e,n]=(0,i.useState)(!1),[t,r]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{r(document.cookie.includes("isLogin=1")),n(!0)},[]),(0,s.jsx)(s.Fragment,{children:e&&(0,s.jsx)(g,{isLogin:t})})}}},function(e){e.O(0,[992,322,971,23,744],function(){return e(e.s=8819)}),_N_E=e.O()}]);