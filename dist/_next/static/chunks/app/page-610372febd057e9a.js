(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8819:function(e,n,t){Promise.resolve().then(t.bind(t,6774))},6774:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return d}});var s=t(7437),r=t(2265);t(2113);var i=t(888),c=t.n(i);let o="gt",a="https://raw.githubusercontent.com/fhvknb/raw-assets/master/".concat(o,"/");function l(e){let{cb:n}=e,t=(0,r.useRef)(null);return(0,r.useEffect)(()=>{t.current&&t.current.addEventListener("submit",function(e){e.preventDefault();let t=new FormData(this),s={};t.forEach((e,n)=>{s[n]=e}),n&&n(s)})},[]),(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:(0,s.jsx)("div",{className:" rounded bg-white p-4",children:(0,s.jsxs)("form",{id:"conf_form",ref:t,children:[(0,s.jsxs)("div",{className:"pb-4 flex justify-between",children:[(0,s.jsx)("div",{className:"w-20 leading-8",children:"Group:"}),(0,s.jsx)("input",{className:"w-60 h-8 rounded indent-2 focus:outline-none focus:ring-2 focus:ring-indigo-500  focus:border-indigo-500 ",name:"group"})]}),(0,s.jsxs)("div",{className:"pb-4 flex justify-between",children:[(0,s.jsx)("div",{className:"w-20 leading-8",children:"Duration:"}),(0,s.jsx)("input",{className:"w-60 h-8 rounded indent-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",type:"number",name:"duration"})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{className:"border-solid border-2 border-indigo-600 pl-4 pr-4 rounded",children:"保存"})})]})})})}function u(){let[e,n]=(0,r.useState)([]),[t,i]=(0,r.useState)(0),[u,d]=(0,r.useState)(!1),f=(0,r.useRef)(null),m=async()=>{let e="https://raw.githubusercontent.com/fhvknb/raw-assets/master/json/".concat(o,".json");try{let t=await fetch(e);if(200===t.status){let e=await t.json();n(e)}}catch(e){console.log(e)}},h=()=>{if(f.current){var e;null===(e=f.current)||void 0===e||e.destroy()}let n=localStorage.getItem("viewerConf"),t=n&&JSON.parse(n);console.log(t),f.current=new(c())(document.getElementById("images"),{interval:(null==t?void 0:t.duration)?Number(t.duration):5e3})};return(0,r.useEffect)(()=>{if(e.length){h();return}let n=localStorage.getItem("viewerConf"),t=n&&JSON.parse(n);(null==t?void 0:t.group)&&(o=t.group,a="https://raw.githubusercontent.com/fhvknb/raw-assets/master/".concat(o,"/")),m()},[e]),(0,s.jsxs)("div",{className:"container min-w-fit  min-h-screen",children:[(0,s.jsxs)("ul",{className:"flex flex-wrap",id:"images",children:[e&&e.length>0&&e.map((e,n)=>(0,s.jsx)("li",{className:"w-48 h-48 m-2 ",children:(0,s.jsx)("img",{src:"".concat(a).concat(e.imgSrc),className:"w-full h-full object-cover rounded"})},"img_".concat(n+9))),(0,s.jsx)("li",{onClick:()=>{if(3===t){i(0),d(!0);return}i(e=>++e)},className:"w-48 h-48 m-2"})]}),u&&(0,s.jsx)(l,{cb:e=>{e&&(localStorage.setItem("viewerConf",JSON.stringify(e)),window.location.href="/?")}})]})}function d(){return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(u,{})})}}},function(e){e.O(0,[992,336,971,23,744],function(){return e(e.s=8819)}),_N_E=e.O()}]);