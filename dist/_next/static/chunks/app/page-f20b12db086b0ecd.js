(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8819:function(e,n,t){Promise.resolve().then(t.bind(t,4515))},4515:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return f}});var r=t(7437),s=t(2265);t(2113);var i=t(888),o=t.n(i);function c(e,n){return"IMG"===e?"https://raw.githubusercontent.com/fhvknb/raw-assets/master/".concat(n,"/"):"https://raw.githubusercontent.com/fhvknb/raw-assets/master/json/".concat(n,".json")}let a=c("IMG","gt"),l=c("DATA","gt");function u(e){let{cb:n}=e,t=(0,s.useRef)(null);return(0,s.useEffect)(()=>{t.current&&t.current.addEventListener("submit",function(e){e.preventDefault();let t=new FormData(this),r={};t.forEach((e,n)=>{r[n]=e}),n&&n(r)})},[]),(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:(0,r.jsx)("div",{className:" rounded bg-white p-4",children:(0,r.jsxs)("form",{id:"conf_form",ref:t,children:[(0,r.jsxs)("div",{className:"pb-4 flex justify-between",children:[(0,r.jsx)("div",{className:"w-20 leading-8",children:"Group:"}),(0,r.jsx)("input",{className:"w-60 h-8 rounded indent-2 focus:outline-none focus:ring focus:ring-2-indigo-500  focus:border-indigo-500 border-2 border-indigo-300  ",name:"group"})]}),(0,r.jsxs)("div",{className:"pb-4 flex justify-between",children:[(0,r.jsx)("div",{className:"w-20 leading-8",children:"Duration:"}),(0,r.jsx)("input",{className:"w-60 h-8 rounded indent-2 focus:outline-none focus:ring focus:ring-2-indigo-500 focus:border-indigo-500 border-2 border-indigo-300  ",type:"number",name:"duration"})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("button",{className:"border-solid border-2 border-indigo-600 pl-4 pr-4 rounded",children:"保存"})})]})})})}function d(){let[e,n]=(0,s.useState)([]),[t,i]=(0,s.useState)(0),[d,f]=(0,s.useState)(!1),m=(0,s.useRef)(null),g=async()=>{let e=localStorage.getItem("viewerConf"),t=e&&JSON.parse(e);(null==t?void 0:t.group)&&(l=c("DATA",t.group),a=c("IMG",t.group));try{let e=await fetch(l);if(200===e.status){let t=await e.json();n(t)}}catch(e){console.log(e)}},h=()=>{if(m.current){var e;null===(e=m.current)||void 0===e||e.destroy()}let n=localStorage.getItem("viewerConf"),t=n&&JSON.parse(n);console.log(t),m.current=new(o())(document.getElementById("images"),{interval:(null==t?void 0:t.duration)?Number(t.duration):5e3})};return(0,s.useEffect)(()=>{if(e.length){h();return}g()},[e]),(0,r.jsxs)("div",{className:"container min-w-fit  min-h-screen",children:[(0,r.jsxs)("ul",{className:"flex flex-wrap",id:"images",children:[e&&e.length>0&&e.map((e,n)=>(0,r.jsx)("li",{className:"w-48 h-48 mt-2 ml-2",children:(0,r.jsx)("img",{src:"".concat(a).concat(e.imgSrc),className:"w-full h-full object-cover rounded"})},"img_".concat(n+9))),(0,r.jsx)("li",{onClick:()=>{if(3===t){i(0),f(!0);return}i(e=>++e)},className:"w-48 h-48 ml-2 mt-2"})]}),d&&(0,r.jsx)(u,{cb:e=>{e&&(localStorage.setItem("viewerConf",JSON.stringify(e)),window.location.href="/?")}})]})}function f(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(d,{})})}}},function(e){e.O(0,[992,336,971,23,744],function(){return e(e.s=8819)}),_N_E=e.O()}]);