(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[436],{2045:function(e,t,n){Promise.resolve().then(n.bind(n,9267))},9267:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var i=n(7437),r=n(2265),s=n(5033);n(2312);let o=["#eccc68","#ff7f50","#ff6b81","#7bed9f","#5352ed","#a4b0be","#dfe4ea","#2ed573","#1e90ff","#3742fa","#ff4757","#ff6348","#ffa502","#eccc68","#ff7f50","#ff6b81","#7bed9f","#5352ed","#a4b0be","#dfe4ea","#2ed573","#1e90ff","#3742fa","#ff4757","#ff6348","#ffa502"];var c=function(e){let{choices:t}=e,[n,c]=(0,r.useState)(!1),[l,a]=(0,r.useState)(!1),u=(0,r.useRef)(null),h=(0,r.useRef)(0),d=(0,r.useRef)(),f=t.length,x=()=>{let e=0,n=[];for(let i=0;i<f;i++){let r=t[i].weight;e+=r;let s=[];for(let e=0;e<r;e++)s.push(i);n.push(s)}let i=Math.floor(e/f),r=0,o=-1;for(let e=0;e<f;e++){let t=n[e],s=t.length;if(s<i)for(let e=0;e<i-s;e++)t.push(-1),r+=1;else s>i&&(t.splice(0,r),o=t[0])}let c=[];for(let e=0;e<f;e++){let t=n[e],i=t.length;for(let e=0;e<i;e++)t[e]<0&&(t[e]=o);c.push((0,s.Sy)(t))}return(0,s.Sy)(c),c},g=()=>{let e=x(),t=0;for(let n=0;n<f;n++)t=Math.max(e[n].length,t);let n=[];for(let i=0;i<t;i++)for(let t=0;t<f;t++)e[t].length&&(n.push(e[t][0]),e[t].shift());return n},m=()=>{if(!d.current)return -1;let e=Math.floor(Math.random()*d.current.length);return d.current[e]},p=()=>{let e=m(),t=360/f;return[e,720+e*t+Math.random()*t+360*Math.floor(h.current/360)]},b=()=>{let[e,n]=p();u.current&&(a(!0),u.current.style.transition="transform 3s cubic-bezier(0.2, 0.93, 0.43, 1)",u.current.style.transform="rotate(".concat(n,"deg)"),setTimeout(()=>{a(!1),h.current=n,window.alert("已为您自动选择任务--".concat(t[e].text,"，去完成它吧！\uD83C\uDFC6\uD83C\uDFC6\uD83C\uDFC6"))},3e3))};return(0,r.useEffect)(()=>{t.length&&(d.current=g(),h.current=0,u.current.style.transition="unset",u.current.style.transform="rotate(0deg)")},[t]),(0,r.useEffect)(()=>{},[]),(0,i.jsxs)("div",{className:"scale-75 sm:scale-100 wheel-box",children:[(0,i.jsxs)("div",{className:"wheel",ref:u,children:[(()=>{let e=[],n=360/f,r=180-n;if(f){if(r<0)return e;if(0===r){for(let n=0;n<2;n++){let r=o[n];e.push((0,i.jsx)("div",{className:"slice",style:{transform:"translateY(-50%) rotate(-".concat(180*n+90,"deg)"),backgroundColor:r,width:"100%",height:"100%"},children:(0,i.jsx)("div",{className:"slice-inner",style:{paddingTop:"300px"},children:t[n].text})},"slice_k".concat(n)))}return e}if(r<90){for(let c=0;c<f;c++){let l=o[c],a=250*Math.tan((0,s.M4)(r/2));e.push((0,i.jsx)("div",{className:"slice",style:{transform:"rotate(-".concat(n*c+n/2,"deg)"),backgroundColor:l,width:500,height:2*a,left:-50,top:-a+(200-a),clipPath:"polygon(50% 0, 100% 50%, 50% 100%, 0 50%)"},children:(0,i.jsx)("div",{className:"slice-inner",style:{paddingTop:"".concat(a,"px")},children:t[c].text})},"slice_k".concat(c)))}return e}if(r>=90){for(let c=0;c<f;c++){let l=o[c],a=200/Math.tan((0,s.M4)(r/2));e.push((0,i.jsx)("div",{className:"slice",style:{transform:"rotate(-".concat(n*c+n/2,"deg)"),backgroundColor:l,width:2*a,height:400,top:-200,left:200-a,clipPath:"polygon(50% 0, 100% 50%, 50% 100%, 0 50%)"},children:(0,i.jsx)("div",{className:"slice-inner",style:{paddingTop:"".concat(230,"px")},children:t[c].text})},"slice_k".concat(c)))}return e}}})(),n&&(0,i.jsx)("div",{className:"inner-line-x"}),n&&(0,i.jsx)("div",{className:"inner-line-y"})]}),(0,i.jsx)("div",{className:"target"}),(0,i.jsx)("div",{className:"inline-block py-1.5 px-3.5 ".concat(l?"bg-amber-200 cursor-not-allowed":"bg-amber-600 cursor-pointer","   text-white rounded choice-btn "),onClick:()=>{l||b()},children:"帮我选择"})]})},l=function(e){let{isOpen:t=!1,close:n}=e;return t&&(0,i.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",onClick:()=>{n&&n()},children:(0,i.jsx)("div",{onClick:e=>e.stopPropagation(),children:e.children})})};n(5788);var a=e=>{let{cb:t}=e,[n,s]=(0,r.useState)([]),[o,c]=(0,r.useState)(""),l=(e,t,i)=>{let r=e.target.value,o=n.slice();"name"===i?o[t].text=r:o[t].weight=+r,s(o)},a=e=>{let t=n.slice();t.splice(e,1),s(t)};return(0,r.useEffect)(()=>{let e=localStorage.getItem("choices")||"",t=e&&JSON.parse(e);t?s(t):s([{text:"",weight:void 0}])},[]),(0,i.jsxs)("div",{className:"bg-white p-4 rounded  text-base shadow-md",children:[(0,i.jsxs)("div",{className:"flex mb-4",children:[(0,i.jsx)("button",{className:"py-1.5 px-3.5 text-white bg-violet-500 rounded ",onClick:()=>{let e=n.slice();e.push({text:"",weight:void 0}),s(e)},children:"Add"}),(0,i.jsx)("button",{className:"py-1.5 px-3.5 ml-4 text-white bg-violet-500 rounded ",onClick:()=>{let e=n.length;if(!e||e<2){c("数据不正确， 请重新输入");return}let i=!0;for(let t=0;t<e;t++)if(!n[t].text||!n[t].weight){i=!1;break}if(i)localStorage.setItem("choices",JSON.stringify(n)),c("");else{c("数据不正确， 请重新输入");return}t&&t()},children:"Save"})]}),n&&n.length>0&&n.map((e,t)=>(0,i.jsxs)("div",{className:"flex mb-2",children:[(0,i.jsx)("span",{children:"Name:"}),(0,i.jsx)("input",{value:e.text,onChange:e=>l(e,t,"name"),required:!0,className:"w-32 ml-2 pl-1 rounded border-violet-800 border focus:outline-none focus:ring focus:ring-violet-300 "}),(0,i.jsx)("span",{className:"ml-4",children:"Weight:"}),(0,i.jsx)("input",{value:e.weight,type:"number",onChange:e=>l(e,t,"weight"),required:!0,className:"w-32  ml-2 pl-1 rounded border-violet-800 border focus:outline-none focus:ring focus:ring-violet-300 "}),(0,i.jsx)("span",{onClick:()=>a(t),className:"ml-2 underline cursor-pointer text-red-500",children:"Del"})]},"itemadd_".concat(t+1))),!!o&&(0,i.jsx)("div",{className:"text-sm text-rose-500 ",children:o})]})};let u={play:[{text:"玩1次",icon:"icon",weight:10},{text:"玩2次",icon:"icon",weight:10},{text:"玩3次",icon:"icon",weight:10}],doOrNot:[{text:"做",icon:"icon",weight:20},{text:"不做",icon:"icon",weight:20}],doLike:[{text:"唱歌",icon:"icon",weight:20},{text:"下棋",icon:"icon",weight:20},{text:"玩游戏",icon:"icon",weight:20},{text:"锻炼",icon:"icon",weight:20},{text:"看书",icon:"icon",weight:20}],test:[{text:"Task One",icon:"icon",weight:20},{text:"Task Two",icon:"icon",weight:20},{text:"Task Three",icon:"icon",weight:20},{text:"Task Four",icon:"icon",weight:20}],extra:[]};function h(){let[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!1),[o,h]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{t(u.test)},[]),(0,i.jsxs)("main",{className:"flex min-h-screen justify-center",children:[(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center overflow-hidden",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("button",{className:"inline-block py-1.5 px-3.5 text-white bg-blue-500 rounded mb-12",onClick:()=>s(!0),children:"Change Choice"}),(0,i.jsx)("button",{className:"inline-block py-1.5 px-3.5 ml-4 text-white bg-blue-500 rounded mb-12",onClick:()=>h(!0),children:"Add Choice"})]}),(0,i.jsx)(c,{choices:e})]}),(0,i.jsx)(l,{isOpen:n,close:()=>s(!1),children:(0,i.jsxs)("div",{className:"bg-white p-4 rounded  text-base shadow-md",children:[(0,i.jsx)("label",{className:"",children:"抉择类型："}),(0,i.jsxs)("select",{className:"w-52  h-8 rounded border  border-gray-700",onChange:e=>{let n=e.target.value;if("extra"===n){let e=localStorage.getItem("choices"),n=e&&JSON.parse(e)||[];n.length>1?t(n):t(u.test)}else t(u[n]);s(!1)},children:[(0,i.jsx)("option",{value:"",children:"--Please choose--"}),(0,i.jsx)("option",{value:"doOrNot",children:"Choose Two"}),(0,i.jsx)("option",{value:"play",children:"Choose Play"}),(0,i.jsx)("option",{value:"doLike",children:"Choose Like"}),(0,i.jsx)("option",{value:"extra",children:"Choose Extra"})]})]})}),(0,i.jsx)(l,{isOpen:o,close:()=>h(!1),children:(0,i.jsx)(a,{cb:()=>h(!1)})})]})}},5033:function(e,t,n){"use strict";function i(e,t){return"IMG"===e?"https://raw.githubusercontent.com/fhvknb/raw-assets/master/".concat(t,"/"):"https://raw.githubusercontent.com/fhvknb/raw-assets/master/json/".concat(t,".json")}function r(e,t,n){let i="";if(n){let e=new Date;e.setTime(e.getTime()+864e5*n),i="; expires="+e.toUTCString()}document.cookie=e+"="+(t||"")+i+"; path=/"}function s(){return document.cookie.includes("isLogin=1")}function o(e){if(!e||!e.length)return[];for(let t=e.length-1;t>0;t--){let n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}function c(e){if("number"!=typeof e)throw Error("数据错误");return Math.floor(Math.PI/180*e*100)/100}n.d(t,{Km:function(){return s},M4:function(){return c},Sy:function(){return o},d8:function(){return r},mc:function(){return i}})},5788:function(){},2312:function(){}},function(e){e.O(0,[153,971,23,744],function(){return e(e.s=2045)}),_N_E=e.O()}]);